<% column.tasks.each do |task|%>

<section class="card bg-white p-4 shadow-small rounded-md relative group" data-task-id="<%=task.id%>">
  <div data-controller="statusDone"  class="text-icon flex items-center mb-3">
    <button data-action="mr-1.5 click->statusDone#status_done" data-statusDone-target="doneBtn" class=" text-3xl text-black">☐</button>
    <div class=" text-2xl text-black"><%= task.title %></div>
  </div>
  <div class="flex flex-wrap gap-2 h-7 mb-3">
    <span class="h-5 flex items-center rounded-lg text-ml ">優先度：<%= task.priority %></span>
  </div>
  <div class="flex items-center gap-x-2 mb-3">
    <button class="text-icon hover:text-gray-800 hover:border-gray-800 w-6 h-6 rounded-full border border-dashed flex items-center justify-center border-gray-500">
      <svg class="fill-current" height="14" focusable="false" viewBox="0 0 32 32">
        <path
          d="M16,18c-4.4,0-8-3.6-8-8s3.6-8,8-8s8,3.6,8,8S20.4,18,16,18z M16,4c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S19.3,4,16,4z M29,32c-0.6,0-1-0.4-1-1v-4.2c0-2.6-2.2-4.8-4.8-4.8H8.8C6.2,22,4,24.2,4,26.8V31c0,0.6-0.4,1-1,1s-1-0.4-1-1v-4.2C2,23,5,20,8.8,20h14.4c3.7,0,6.8,3,6.8,6.8V31C30,31.6,29.6,32,29,32z"
        ></path>
      </svg>
    </button>
    <span><%= task.user_name %></span>
    <button class="text-icon hover:text-gray-800 hover:border-gray-800 w-6 h-6 rounded-full border border-dashed flex items-center justify-center border-gray-500">
      <svg class="fill-current" height="14" focusable="false" viewBox="0 0 32 32">
        <path
          d="M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M8,4v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4v2H4V8C4,5.8,5.8,4,8,4z M24,28H8c-2.2,0-4-1.8-4-4V12h24v12C28,26.2,26.2,28,24,28z"
        ></path>
      </svg>
    </button>
    <span><%= task.start_time&.strftime('%m月%d日')%>-<%=task.end_time&.strftime('%m月%d日')%></span>
  </div>
  <div class="flex mb-3">任務描述：<%= task.content%></div>
  <div class="absolute group-scope top-2 right-2">
    <button data-action="click->board#card_nav"class="w-9 h-9 flex items-center justify-center text-icon shadow opacity-0 transition-all group-hover:opacity-100 border border-light rounded-md z-1 bg-white">
      <svg class="fill-current mr-1" height="16" focusable="false" viewBox="0 0 32 32">
        <path
          d="M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"
        ></path>
      </svg>
    </button>
    <nav
      class="display absolute top-full z-10 right-0 translate-y-1 shadow-box rounded bg-gray-50 py-1 w-44  transition-all group-scope-focus-within:opacity-100"
    >
      <button class="updateBtn h-9 w-44 py-1 flex items-center justify-center px-2 text-ml font-medium transition-all text-gray-800 hover:bg-menu-hover border-b text-sm">
        修改任務
      </button>
      <div class="flex items-center h-9  py-1 justify-center border-b">
        <%= link_to "刪除任務",destroy_task_column_path(column,task_id: task.id),method: "delete", data: { confirm: "是否刪除此任務" },:class=>"px-2 text-ml font-medium transition-all text-gray-800 hover:bg-menu-hover text-sm" %>
      </div>
      <div class="display task_update  w-96 bg-white rounded-md pb-2 fixed z-10 right-0 bottom-0">
        <%= render "TaskForm", model: task,user: user, url: update_task_column_path(column,task_id: task.id)%>
      </div>
    </nav>
  </div>
</section>
<% end %>